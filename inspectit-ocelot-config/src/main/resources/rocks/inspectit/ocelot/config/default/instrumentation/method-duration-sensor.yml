inspectit:

  # settings regarding the instrumentation performed on the target application
  instrumentation:
    
    rules:
      record_method_duration:
        entry:
          method_entry_time: { action: timestamp_nanos }
          method_name: {action: get_method_fqn }
        exit:
          method_duration:
            action: elapsed_millis
            data-input:
              sinceNanos: method_entry_time
        metrics:
          '[method/duration]':
            value: method_duration
            data-tags: {method_name: method_name}

  metrics:
    definitions:
      '[method/duration]':
        type: DOUBLE
        unit: ms
        description: "the duration from method entry to method exit"
        views:
          '[method/duration/sum]':
            aggregation: SUM
            tags:
              method_name : true
          '[method/duration/count]':
            aggregation: COUNT
            tags:
              method_name: true